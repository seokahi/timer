<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <title>타이머</title>
</head>
<body>
    <header class="header">
        <h1 class="ir">위니브</h1>
        <img class="logo" src="./img/weniv-logo.png" alt="위니브로고">
    </header>
    <main class="main">
        <div class="container">
            <h2 class="tit-timer">TIMER</h2>
            <form action="" class="block-time">
                <div class="timer">
                    <strong>HRS</strong>
                    <span>00</span>
                </div>
                <div class="timer">
                    <strong>MIN</strong>
                    <span>00</span>
                </div>
                <div class="timer">
                    <strong>SEC</strong>
                    <span class="sec">00</span>
                </div>
            </form>
                <div class="btn">
                    <button class="inp-btn start"><img src="./img/start_gray.png" alt="" ><span>START</span></button>
                    <button class="inp-btn reset"><img src="./img/reset_gray.png" alt=""><span>RESET</span></button> 
                </div>
        </div>
    </main>
    <footer class="footer">
        <h1 class="ir">위니브로고</h1>
        <img src="./img/WENIV Corp..png" alt="">
    </footer>
    <script>
        const btn = document.querySelector(".btn");
        const sec = document.querySelector(".sec");
        const start = document.querySelector(".start");
        const reset = document.querySelector(".reset");
        const text_start = document.querySelector(".start span");
        const text_reset = document.querySelector(".reset span");

        /* pause 요소 생성 */
        const pause = document.createElement("button");
        const pause_img = document.createElement("img");
        pause_img.src = "./img/pause.png";
        const span = document.createElement("span");
        span.innerText = "PAUSE";
        pause.appendChild(pause_img);
        pause.appendChild(span);
        pause.setAttribute("class","inp-btn");
        console.log(pause);
        /* pause 요소 생성 */
        let timerId = [];
        let flag = 0;
        function timeSetting(){
            if(sec.textContent== "00") {
                sec.innerHTML="10";
            }
        }

        function PrintTime() {
            let Time = parseInt(sec.textContent);
            console.log(Time);
            if(Time === 0) {
                timerId.map(i => clearInterval(i));
                sec.textContent="00";
                pause.remove();
                btn.prepend(start);
                start.childNodes[0].src="./img/start_gray.png";
                reset.childNodes[0].src="./img/reset_gray.png";
                start.classList.remove("changeStartColor");
                reset.classList.remove("changeResetColor");
                pause.classList.remove("changePauseColor");
                alert("🙉 타이머가 끝났어용 !!! 🙉");
            }
            else {
                sec.textContent="0"+(Time-1); 
            }            
        }    
        
        sec.addEventListener('click', (event) => {
            timeSetting();
            start.classList.add("changeStartColor");
            reset.classList.add("changeResetColor");
            start.childNodes[0].src = "./img/start_white.png";
            reset.childNodes[0].src = "./img/reset_white.png";
        })
        start.addEventListener('click' ,(event) => {
            console.log("gkdk");
            start.classList.remove("changeStartColor");
            start.remove();
            btn.prepend(pause);

            pause.classList.add("changePauseColor");
            timerId.push(setInterval(PrintTime, 1000));
        })
        reset.addEventListener('click',(event) => {
                pause.classList.remove("changePauseColor");
                reset.classList.remove("changeResetColor");
                start.classList.remove("changeStartColor");
                pause.remove();
                btn.prepend(start);
                start.childNodes[0].src="./img/start_gray.png";
                reset.childNodes[0].src="./img/reset_gray.png";
                timerId.map(i => clearInterval(i));
                sec.textContent = "00";
        })
        pause.addEventListener('click',() => {
            console.log(pause);
            if(flag == 0 ) {
                timerId.map(i => clearInterval(i));
                pause.classList.remove("changePauseColor");
                pause.classList.add("changeStartColor");
                pause.childNodes[1].textContent="START";
                pause.childNodes[0].src = "./img/start_white.png";

            }
            if(flag == 1) {
                pause.classList.remove("changeStartColor");
                pause.classList.add("changePauseColor");
                pause.childNodes[1].textContent="PAUSE";
                pause.childNodes[0].src = "./img/pause.png";
                timerId.push(setInterval(PrintTime, 1000));
            }
            
            if(flag == 0) {
                flag = 1;
            }
            else {
                flag = 0;
            }
        })
        // start.addEventListener('click' ,(event) => {
        //     start.classList.remove("changeStartColor");
        //     start.classList.add("changePauseColor");
        //     timerId = setInterval(PrintTime, 1000);
        //     text_start.innerText="PAUSE"
        //     start.childNodes[0].src = "./img/pause.png";
        // })
        //reset 과 start를 time.addEventListener에서 빼내니까 성공 => 이벤트리스너에 중복등록되는듯
    </script>
</body>
</html>